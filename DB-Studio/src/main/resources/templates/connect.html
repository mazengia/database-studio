<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>DB Studio Connect</title>
    <link rel="stylesheet" href="/webjars/bootstrap/5.3.2/css/bootstrap.min.css">
</head>
<body class="p-4">
<div class="container">
    <h2 class="mb-3">Connect to Database</h2>
    <form th:action="@{/db/connect}" method="post" th:object="${profile}">
        <!-- JDBC Section -->
        <h5>JDBC Connection</h5>

        <!-- Driver Dropdown -->
        <select class="form-select mb-2" th:field="*{driverClassName}" id="driverSelect">
            <option value="">-- Select Driver --</option>
            <option value="org.h2.Driver">H2 Database</option>
            <option value="com.mysql.cj.jdbc.Driver">MySQL</option>
            <option value="org.postgresql.Driver">PostgreSQL</option>
            <option value="oracle.jdbc.OracleDriver">Oracle</option>
            <option value="com.microsoft.sqlserver.jdbc.SQLServerDriver">SQL Server</option>
            <option value="org.mariadb.jdbc.Driver">MariaDB</option>
            <option value="com.ibm.db2.jcc.DB2Driver">IBM DB2</option>
            <option value="org.sqlite.JDBC">SQLite</option>
            <option value="com.sybase.jdbc4.jdbc.SybDriver">Sybase</option>
            <option value="com.sap.db.jdbc.Driver">SAP HANA</option>
            <option value="org.apache.derby.jdbc.EmbeddedDriver">Apache Derby</option>
            <option value="net.sourceforge.jtds.jdbc.Driver">jTDS (SQL Server/Sybase)</option>
        </select>

        <!-- JDBC URL template dropdown -->
        <div class="mb-2">
            <label class="form-label">JDBC URL</label>
            <select id="jdbcTemplateSelect" class="form-select mb-2">
                <option value="">-- Select Sample JDBC URL --</option>
                <option value="jdbc:h2:mem:testdb">H2 (In-Memory)</option>
                <option value="jdbc:mysql://host:3306/dbname">MySQL</option>
                <option value="jdbc:postgresql://host:5432/dbname">PostgreSQL</option>
                <option value="jdbc:oracle:thin:@host:1521:orcl">Oracle</option>
                <option value="jdbc:sqlserver://host:1433;encrypt=false;instanceName=INSTANCE;databaseName=dbname;encrypt=false">
                    SQL Server
                </option>
                <option value="jdbc:mariadb://host:3306/dbname">MariaDB</option>
                <option value="jdbc:sqlite:/path/to/dbfile.db">SQLite</option>
            </select>
            <input id="jdbcUrlInput" class="form-control" placeholder="JDBC URL" th:field="*{jdbcUrl}">
        </div>

        <input class="form-control mb-2" placeholder="Username" th:field="*{username}">
        <input class="form-control mb-2" placeholder="Password" type="password" th:field="*{password}">

        <hr>

        <!-- MongoDB Section -->
        <h5>MongoDB Connection</h5>
        <div class="mb-2">
            <label class="form-label">MongoDB URI</label>
            <!-- MongoDB template dropdown -->
            <select id="mongoTemplateSelect" class="form-select mb-2">
                <option value="">-- Select Sample MongoDB URI --</option>
                <option value="mongodb://host:27017/dbname">Standalone</option>
                <option value="mongodb://user:pass@host:27017/dbname">With Authentication</option>
                <option value="mongodb://host1:27017,host2:27017,host3:27017/dbname?replicaSet=rs0">Replica Set</option>
                <option value="mongodb+srv://user:pass@cluster0.mongodb.net/dbname">MongoDB Atlas (SRV)</option>
            </select>
            <input id="mongoUriInput" class="form-control" placeholder="MongoDB URI" th:field="*{mongoUri}">
        </div>

        <button class="btn btn-primary mt-2">Connect</button>
    </form>

    <!-- Error message --><!-- Error message -->
    <div th:if="${error}" class="alert alert-danger mt-2" th:text="${error}"></div>
    <!-- Info / guidance -->
    <p class="mt-3 text-muted">
        For JDBC: Select Driver Class, choose a sample JDBC URL (editable), enter Username, and Password.<br>
        For MongoDB: Select a sample URI (editable) or type your own.
    </p>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        // JDBC auto-fill
        const jdbcSelect = document.getElementById("jdbcTemplateSelect");
        const jdbcInput = document.getElementById("jdbcUrlInput");
        jdbcSelect.addEventListener("change", function () {
            if (this.value) jdbcInput.value = this.value;
        });

        // MongoDB auto-fill
        const mongoSelect = document.getElementById("mongoTemplateSelect");
        const mongoInput = document.getElementById("mongoUriInput");
        mongoSelect.addEventListener("change", function () {
            if (this.value) mongoInput.value = this.value;
        });
    });
</script>
</body>
</html>
